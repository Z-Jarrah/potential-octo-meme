<!DOCTYPE html>
<html lang="en" id="home">
<head>
  <h1> CS 498 Narrative Visualization Project</h1>
  <h2>Zeed Jarrah </h2>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <!-- Load d3-annotation -->
  <script src="https://rawgit.com/susielu/d3-annotation/master/d3-annotation.min.js"></script>
</head>

<style> /* set the CSS */

body { font: 12px Arial;}

path { 
    stroke: blue;
    stroke-width: 2;
    fill: none;
}

.axis path,
.axis line {
    fill: none;
    stroke: gray;
    stroke-width: 1;
    shape-rendering: crispEdges;
}

div.tooltip {	
    position: absolute;			
    text-align: center;			
    width: 60px;					
    height: 28px;					
    padding: 2px;				
    font: 12px sans-serif;		
    background: gray;	
    border: 0px;		
    border-radius: 8px;			
    pointer-events: none;			
}

</style>

<body>
<h3> Examining the Works of Three Great Fantasy Writers </h3>

<div id="option1">
    <input name="Rowling"
           translate=transform(200,200)
           type="button" 
           value="J.K. Rowling" 
           onclick="RowlingData()" />
</div>

<div id="option1">
    <input name="Tolkien" 
           type="button" 
           value="J.R.R. Tolkien" 
           onclick="TolkienData()" />
</div>

<div id="option1">
    <input name="Martin" 
           type="button" 
           value="George R.R. Martin" 
           onclick="MartinData()" />
</div>

<p id='books'></p>
<!--SVG Canvas HERE>-->
<svg></svg>

<script>
// Set the dimensions of the canvas / graph
var margin = {top: 30, right: 20, bottom: 30, left: 50},
    width = 600 - margin.left - margin.right,
    height = 270 - margin.top - margin.bottom;
    
    function RowlingData(){
      d3.select('svg').remove()
      // Adds the svg canvas
      var svg = d3.select("body")
        .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform", 
              "translate(" + margin.left + "," + margin.top + ")");
              
      // Loading Goodreads Data
      var array = []

      d3.csv("https://raw.githubusercontent.com/Z-Jarrah/potential-octo-meme/master/rowling.csv").then(function(data){
    
        for (i = 0; i < data.length; i++){
          text = data[i]
          array.push(text)
        }
        var text = ''
    
        for (i = 0; i < array.length; i++){
          text += array[i]['title'] + '| Rating: ' + array[i]['average_rating'] + '| # of Ratings: ' + array[i]['ratings_count'] + '<br>'
        }
        document.getElementById('books').innerHTML = text
    
        console.log(array.length)
    
    ;})
    
      const annotations = [
        {
          note: {
            label: "The works of J.K. Rowling [Ratings from Goodreads]",
            title: 'Exploring Literary Works'
          },
          x: 450,
          y: 100,
          dy: 20,
          dx: 20
        }
      ]

      // Add annotation to the chart
      const makeAnnotations = d3.annotation()
        .annotations(annotations)
        d3.select('svg')
        .append('g')
        .call(makeAnnotations)
          
    }// End of RowlingData Function

    
    
        
  function TolkienData(){
    d3.select('svg').remove()
    // Adds the svg canvas
    var svg = d3.select("body")
                .append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", 
                  "translate(" + margin.left + "," + margin.top + ")");
          
    // Loading Goodreads Data
    var array = []

    d3.csv("https://raw.githubusercontent.com/Z-Jarrah/potential-octo-meme/master/tolkien.csv").then(function(data){

    for (i = 0; i < data.length; i++){
      text = data[i]
      array.push(text)
    }
    var text = ''

    for (i = 0; i < array.length; i++){
      text += array[i]['title'] + '| Rating: ' + array[i]['average_rating'] + '| # of Ratings: ' + array[i]['ratings_count'] + '<br>'
    }
    document.getElementById('books').innerHTML = text

    console.log(array.length)

    ;})

    const annotations = [
      {
        note: {
          label: "The works of J.R.R Tolkien [Ratings from Goodreads]",
          title: 'Exploring Literary Works'
        },
        x: 450,
        y: 100,
        dy: 20,
        dx: 20
      }
    ]

    // Add annotation to the chart
    const makeAnnotations = d3.annotation()
          .annotations(annotations)
          d3.select('svg')
          .append('g')
          .call(makeAnnotations)
  
  }// End of TolkienData Function
  
  function MartinData(){
    d3.select('svg').remove()
    d3.select('svg').remove()
    // Adds the svg canvas
    var svg = d3.select("body")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", 
              "translate(" + margin.left + "," + margin.top + ")");
      
    // Loading Goodreads Data
    var array = []

    d3.csv("https://raw.githubusercontent.com/Z-Jarrah/potential-octo-meme/master/martin.csv").then(function(data){
      
      for (i = 0; i < data.length; i++){
        text = data[i]
        array.push(text)
      }
      var text = ''

      for (i = 0; i < array.length; i++){
        text += array[i]['title'] + '| Rating: ' + array[i]['average_rating'] + '| # of Ratings: ' + array[i]['ratings_count'] + '<br>'
      }
      document.getElementById('books').innerHTML = text

      console.log(array.length)

      ;})

      const annotations = [
      {
        note: {
          label: "The works of George R.R Martin [Ratings from Goodreads]",
          title: 'Exploring Literary Works'
        },
        x: 450,
        y: 100,
        dy: 20,
        dx: 20
      }
    ]

    // Add annotation to the chart
    const makeAnnotations = d3.annotation()
      .annotations(annotations)
      d3.select('svg')
      .append('g')
      .call(makeAnnotations)
    
    
  }// End of MartinData Function
    
</script>

</body>
</html>

